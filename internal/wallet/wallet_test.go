package wallet

import (
	"github.com/cosmos/cosmos-sdk/types/tx"
	"testing"
)

func TestWallet(t *testing.T) {
	//PK := "9a5305fa4c55cbf517c99693a7ec6766203c88feab50c944c00feec051d5dab7"

	PK := "1cbd5d2d1801e964736881fc0584473f23ba82669599ac65957fb4f2caf43e17"
	address := "rarimo1xg8p3s2dsp6v79txhjdsdjprg3g87pn2n8uzxp"

	wallet := Wallet{}

	t.Run("Should create a new wallet", func(t *testing.T) {
		_wallet, err := NewWallet(PK, "rarimo")
		if err != nil {
			t.Errorf("Error creating wallet: %v", err)
		}
		wallet = *_wallet

		if wallet.Address != address {
			t.Errorf("Expected address %s, got %s", address, wallet.Address)
		}
	})
	t.Run("Should sign", func(t *testing.T) {
		signDoc := tx.SignDoc{
			BodyBytes: []byte{

				10,
				140,
				1,
				10,
				28,
				47,
				99,
				111,
				115,
				109,
				111,
				115,
				46,
				98,
				97,
				110,
				107,
				46,
				118,
				49,
				98,
				101,
				116,
				97,
				49,
				46,
				77,
				115,
				103,
				83,
				101,
				110,
				100,
				18,
				108,
				10,
				45,
				114,
				97,
				114,
				105,
				109,
				111,
				49,
				120,
				103,
				56,
				112,
				51,
				115,
				50,
				100,
				115,
				112,
				54,
				118,
				55,
				57,
				116,
				120,
				104,
				106,
				100,
				115,
				100,
				106,
				112,
				114,
				103,
				51,
				103,
				56,
				55,
				112,
				110,
				50,
				110,
				56,
				117,
				122,
				120,
				112,
				18,
				45,
				114,
				97,
				114,
				105,
				109,
				111,
				49,
				120,
				103,
				56,
				112,
				51,
				115,
				50,
				100,
				115,
				112,
				54,
				118,
				55,
				57,
				116,
				120,
				104,
				106,
				100,
				115,
				100,
				106,
				112,
				114,
				103,
				51,
				103,
				56,
				55,
				112,
				110,
				50,
				110,
				56,
				117,
				122,
				120,
				112,
				26,
				12,
				10,
				5,
				115,
				116,
				97,
				107,
				101,
				18,
				3,
				49,
				48,
				48,
			},
			AuthInfoBytes: []byte{
				10,
				80,
				10,
				70,
				10,
				31,
				47,
				99,
				111,
				115,
				109,
				111,
				115,
				46,
				99,
				114,
				121,
				112,
				116,
				111,
				46,
				115,
				101,
				99,
				112,
				50,
				53,
				54,
				107,
				49,
				46,
				80,
				117,
				98,
				75,
				101,
				121,
				18,
				35,
				10,
				33,
				2,
				246,
				112,
				230,
				131,
				228,
				190,
				91,
				248,
				25,
				235,
				77,
				126,
				73,
				234,
				175,
				249,
				78,
				219,
				112,
				41,
				71,
				56,
				179,
				107,
				224,
				200,
				11,
				148,
				138,
				59,
				146,
				109,
				18,
				4,
				10,
				2,
				8,
				1,
				24,
				18,
				18,
				16,
				10,
				10,
				10,
				5,
				115,
				116,
				97,
				107,
				101,
				18,
				1,
				48,
				16,
				242,
				191,
				5,
			},
			ChainId:       "rarimo_42-1",
			AccountNumber: 0,
		}

		signature, err := wallet.SignDirect(wallet.Address, &signDoc)
		if err != nil {
			t.Errorf("Error signing: %v", err)
		}

		println(signature)
	})
}
